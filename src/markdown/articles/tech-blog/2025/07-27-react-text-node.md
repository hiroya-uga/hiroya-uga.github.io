---
title: "Reactでテキストを\nレンダリングする際の豆知識"
publishedAt: '2025-07-27'
tags: [React, ユーザビリティ]
---

Reactで変数の値をテキストとして出力する際、テキストの中の変数部分だけをブレース（波括弧）で囲んで記述するのが基本の書き方です[^1]。たとえば、変数`count`にクリックされた回数が数字で入るような場合、このように書かれることがほとんどでしょう。

```jsx
<p>Clicked {count} times!</p>
```

[^1]: 参考：[画面の更新（クイックスタート - React）](https://ja.react.dev/learn#updating-the-screen)

しかし筆者は、そのような場合にはテンプレートリテラルを使うか、変数に一度格納してから出力するようにしています。

```jsx:テンプレートリテラルを用いる例
<p>{`Clicked ${count} times!`}</p>;
```

```jsx:変数に格納する例
const content = `Clicked ${count} times!`;

// ...

<p>{content}</p>
```

React 19時点では、JSX内に書かれた文字列はデータの前後で別々のテキストノードが作成されます。1つの文字列として結合しておかないと、テキストが個別のノードに分かれてしまいます。

| コード                                           | テキストノード数 | テキストノード               |
| ------------------------------------------------ | :--------------: | ---------------------------- |
| `Clicked {count} times!`                         |        3         | 「Clicked 」「1」「 times!」 |
| <code>&#x60;Clicked ${count} times!&#x60;</code> |        1         | 「Clicked 1 times!」         |

## 何が違うのか？

どちらの方法で実装しても、表示上の見た目には変化はありません。  
1つの文字列に結合しておくかどうかは、スクリーンリーダーユーザの体験に差を生み出します。

たとえば、macOS 15のVoiceOverでは`aria-live`が指定されている場合、文言が書き換わった際の読み上げ方が変わります。  
iOS 18のVoiceOverではテキストノードごとに読み上げられるため、ユーザは不必要にカーソルを複数回動かさなければなりません。

| テスト環境                                | 結合なしの読み上げ方 | 結合ありの読み上げ方 |
| ----------------------------------------- | :------------------: | :------------------: |
| ^Windows 11 NVDA 2025.1.2jp + Firefox 140 |         全文         |         全文         |
| ^macOS 15 VoiceOver                       |         全文         |         全文         |
| ^iOS 18 VoiceOver                         |       **分割**       |         全文         |
| ^iPadOS 18 VoiceOver                      |       **分割**       |         全文         |

参考：[Render Text in React Playground](/tools/render-text-in-react/)

## おわりに

ライブリージョンの観点ではノードが分割されていない場合、`aria-atomic="true"`のように全文が読み上げられる点には留意が必要です。
どのような読み上げがされてほしいかによって、ライブリージョンの範囲やマークアップは変わってくるでしょう。

読み上げの最適化に取り組んでいるiOSのVoiceOverのユーザが多いWebサイトならば、ユーザビリティの観点から結合してレンダリングする方法を採用するのも1つの選択肢かもしれません。
見出しなどの一息で読み上げて欲しいコンテンツに関しては、一考の余地があるのではないでしょうか。

とはいえ筆者としては、特定の環境のために変わった書き方に統一するというのも少しイマイチに感じるので、iOSおよびiPadOSのVoiceOverにテキストノード単位ではなく要素単位で読み上げるようアップデートしてほしいと感じています。
